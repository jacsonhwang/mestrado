RotaController.prototype.geocode = function(location){
	ponto = new Ponto();
	
	$.ajax({
		type: "GET",
		url: "http://maps.googleapis.com/maps/api/geocode/json?latlng="+location.toUrlValue()+"&sensor=false",
		async: false,
		success: function(geocodeReverse) {
			
			if (geocodeReverse.status == 'OK') {
				
				ponto.setEnderecoFormatado(geocodeReverse.results[0].formatted_address);
				
				ponto.setLatitude(location.lat()); 
				ponto.setLongitude(location.lng());							
				ponto.setOrdem(Ponto.ordemEstatica);
				
				var enderecos = geocodeReverse.results[0].address_components;
				
				for (var i in enderecos) {
					
					for (var j in enderecos[i].types) {
					
						var tipoEndereco = enderecos[i].types[j];
						
						if (tipoEndereco == 'street_number')				{	ponto.setNumero(enderecos[i].long_name);		break;	}
						if (tipoEndereco == 'route')						{	ponto.setLogradouro(enderecos[i].long_name);	break;	}
						if (tipoEndereco == 'neighborhood')					{	ponto.setBairro(enderecos[i].long_name);		break;	}
						if (tipoEndereco == 'administrative_area_level_2')	{	ponto.setMunicipio(enderecos[i].long_name);		break;	}
						if (tipoEndereco == 'administrative_area_level_1')	{	ponto.setEstado(enderecos[i].long_name);		break;	}
						if (tipoEndereco == 'country')						{	ponto.setPais(enderecos[i].long_name);			break;	}
						if (tipoEndereco == 'postal_code')					{	ponto.setCep(enderecos[i].long_name);			break;	}
					}
				}
			}
		}
	});
	
	return ponto;
};
